<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 æ–°æ˜¥å¹´ä¼šæŠ½å¥–</title>
    <link rel="stylesheet" href="assets/layui.css">
    <script src="assets/viewport.js"></script>
    <script src="assets/tailwind-config.js"></script>
    <script src="assets/tailwind.min.js"></script>
    <script src="assets/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --new-year-red: #d42b3d;
            --deep-red: #8b0000;
            --gold: #ffd700;
            --gold-light: #ffae00;
            --dpr: 1;
            --ui-scale: 1;
            --pvw: calc(1vw * var(--dpr));
            --pvh: calc(1vh * var(--dpr));
        }

        html {
            font-size: calc(16px * var(--ui-scale));
        }

        body {
            background: radial-gradient(circle at center, var(--new-year-red) 0%, var(--deep-red) 100%);
            color: var(--gold);
            font-family: 'Noto Serif SC', serif;
            margin: 0;
            position: relative;
            min-height: 100vh;
            /* æ¡Œé¢ç«¯éšè—æ»šåŠ¨æ¡ï¼Œä¿æŒç²¾è‡´æ„Ÿï¼›ç§»åŠ¨ç«¯å…è®¸æ»šåŠ¨ */
            overflow-x: hidden;
            overflow-y: auto;
        }

        @media (min-width: 1024px) {
            body {
                height: 100vh;
                overflow: hidden;
            }
        }

        .hero-title {
            font-size: clamp(2.6rem, calc(7.2 * var(--pvw)), 6rem);
            line-height: 1.05;
        }

        .hero-subtitle {
            font-size: clamp(1.05rem, calc(3.4 * var(--pvw)), 2.25rem);
            letter-spacing: clamp(0.25rem, calc(1.2 * var(--pvw)), 1rem);
        }

        .winner-title {
            font-size: clamp(1.5rem, calc(3.8 * var(--pvw)), 2rem);
        }

        /* åŸºç¡€å¸ƒå±€å…œåº•ï¼Œé˜²æ­¢ Tailwind åŠ è½½å¤±è´¥æˆ–å»¶è¿Ÿ */
        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem 1rem;
            position: relative;
        }

        .lottery-main {
            width: 100%;
            max-width: 56rem;
            padding: 0 1rem;
            position: relative;
        }

        @media (min-width: 768px) {
            .lottery-main {
                padding: 0 2rem;
            }
        }

        .lottery-box {
            background-color: rgba(127, 29, 29, 0.4);
            backdrop-filter: blur(24px);
            border-radius: 2rem;
            padding: 2rem;
            border-width: 4px;
            border-color: rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 60px rgba(139, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        @media (min-width: 768px) {
            .lottery-box {
                border-radius: 3rem;
                padding: 4rem;
            }
        }

        /* é¢„å®šä¹‰ä¸€äº›å…³é”®ç±»ï¼Œé˜²æ­¢ Tailwind åŠ è½½å‰çš„é»‘è‰²é—ªçƒ */
        .bg-gold { background-color: var(--gold) !important; }
        .text-gold { color: var(--gold) !important; }
        .bg-red-700 { background-color: #b91c1c !important; }
        .bg-red-800 { background-color: #991b1b !important; }
        .bg-red-900 { background-color: #7f1d1d !important; }
        .bg-red-950 { background-color: #450a0a !important; }

        /* èƒŒæ™¯è£…é¥°ç‚¹ç¼€ */
        body::before {
            content: "";
            position: absolute;
            inset: 0;
            background-image: radial-gradient(var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.15;
            animation: moveBg 20s linear infinite;
            pointer-events: none;
        }

        @keyframes moveBg {
            from { background-position: 0 0; }
            to { background-position: 500px 500px; }
        }

        .title-font {
            font-family: 'Ma Shan Zheng', cursive;
        }

        /* ç¯ç¬¼åŠ¨ç”» */
        .lantern {
            position: absolute;
            top: -20px;
            width: 100px;
            height: 120px;
            background: #ff3333;
            border-radius: 50% 50% 45% 45%;
            box-shadow: 0 0 40px rgba(255, 50, 50, 0.6);
            animation: swing 3s ease-in-out infinite alternate;
            transform-origin: top center;
            z-index: 10;
        }

        .lantern::after {
            content: '';
            position: absolute;
            bottom: -30px;
            left: 50%;
            width: 2px;
            height: 30px;
            background: var(--gold);
        }

        @keyframes swing {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }

        /* åå­—æ»šåŠ¨åŒºåŸŸ */
        .name-display {
            height: clamp(120px, calc(18 * var(--pvh)), 200px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(2.8rem, calc(10 * var(--pvw)), 8rem);
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
            transition: all 0.1s;
            letter-spacing: clamp(0.1rem, calc(0.9 * var(--pvw)), 0.5rem);
            word-break: break-all;
            text-align: center;
        }

        .rolling {
            animation: blur 0.1s infinite alternate;
        }

        @keyframes blur {
            from { filter: blur(2px); transform: scale(1); }
            to { filter: blur(5px); transform: scale(1.05); }
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn-gold {
            background: linear-gradient(135deg, #ffd700 0%, #ffae00 100%);
            color: #800000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            border: 2px solid #fff;
            text-shadow: 0 1px 0 rgba(255,255,255,0.3);
            white-space: nowrap;
        }

        .action-btn {
            font-size: clamp(1.25rem, calc(4.2 * var(--pvw)), 2rem);
            padding: clamp(0.9rem, calc(2.2 * var(--pvw)), 1.25rem) clamp(2.2rem, calc(8 * var(--pvw)), 4rem);
        }

        .btn-gold:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
        }

        .btn-gold:active {
            transform: scale(0.95);
        }

        /* è¾¹æ¡†è£…é¥° - ç§»åŠ¨ç«¯ç¼©å°æˆ–éšè— */
        .corner-decoration {
            position: fixed;
            width: 50px;
            height: 50px;
            pointer-events: none;
            z-index: 5;
        }

        @media (min-width: 640px) {
            .corner-decoration {
                width: 150px;
                height: 150px;
            }
        }

        @media (min-width: 1024px) {
            .corner-decoration {
                width: 200px;
                height: 200px;
            }
        }

        .top-left { top: 0; left: 0; border-top: 5px solid var(--gold); border-left: 5px solid var(--gold); }
        .top-right { top: 0; right: 0; border-top: 5px solid var(--gold); border-right: 5px solid var(--gold); }
        .bottom-left { bottom: 0; left: 0; border-bottom: 5px solid var(--gold); border-left: 5px solid var(--gold); }
        .bottom-right { bottom: 0; right: 0; border-bottom: 5px solid var(--gold); border-right: 5px solid var(--gold); }

        @media (min-width: 640px) {
            .top-left { border-top-width: 10px; border-left-width: 10px; }
            .top-right { border-top-width: 10px; border-right-width: 10px; }
            .bottom-left { border-bottom-width: 10px; border-left-width: 10px; }
            .bottom-right { border-bottom-width: 10px; border-right-width: 10px; }
        }

        /* ç¯ç¬¼åœ¨å°å±ä¸Šç¼©å° */
        @media (max-width: 640px) {
            .lantern {
                width: 60px;
                height: 80px;
            }
            .lantern::after {
                bottom: -20px;
                height: 20px;
            }
        }

        /* ä¸­å¥–æ ·å¼ */
        .winner-text {
            color: #fff;
            text-shadow: 0 0 30px #ffd700, 0 0 60px #ffd700;
            animation: winnerScale 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes winnerScale {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1.2); opacity: 1; }
        }

        /* å†å²è®°å½•åˆ—è¡¨ */
        .history-list {
            scrollbar-width: thin;
            scrollbar-color: var(--gold) transparent;
        }
        .history-list::-webkit-scrollbar {
            width: 6px;
        }
        .history-list::-webkit-scrollbar-thumb {
            background-color: var(--gold);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- è£…é¥°å…ƒç´  -->
    <div class="lantern" style="left: 5%;"></div>
    <div class="lantern" style="right: 5%;"></div>
    <div class="corner-decoration top-left"></div>
    <div class="corner-decoration top-right"></div>
    <div class="corner-decoration bottom-left"></div>
    <div class="corner-decoration bottom-right"></div>

    <div class="main-container flex flex-col items-center justify-center min-h-screen py-8 px-4 relative">
        <header class="text-center mb-8 md:mb-12">
            <h1 class="title-font hero-title mb-4 text-white drop-shadow-[0_5px_15px_rgba(255,215,0,0.3)]">2026 è¾æ—§è¿æ–°</h1>
            <h2 class="hero-subtitle text-gold opacity-90">å…¬å¸å¹´ä¼šç››å…¸Â·å¹¸è¿å¤§æŠ½å¥–</h2>
        </header>

        <main class="lottery-main w-full max-w-4xl px-4 md:px-8 relative">
            <!-- å±…ä¸­æŠ½å¥–åŒº -->
            <div class="lottery-box bg-red-900/40 backdrop-blur-2xl rounded-[2rem] md:rounded-[3rem] p-8 md:p-16 border-4 border-gold/50 shadow-[0_0_60px_rgba(139,0,0,0.5)] relative overflow-hidden">
                <!-- å†…éƒ¨è£…é¥°çº¿ -->
                <div class="absolute inset-4 border border-gold/20 rounded-[1.5rem] md:rounded-[2.5rem] pointer-events-none"></div>
                
                <div id="name-box" class="name-display text-white">
                    ç­‰å¾…å¼€å¯
                </div>
                
                <div class="flex flex-col sm:flex-row justify-center mt-8 md:mt-16 space-y-4 sm:space-y-0 sm:space-x-10">
                    <button id="start-btn" class="btn-gold action-btn rounded-full font-extrabold">
                        å¼€å§‹æŠ½å¥–
                    </button>
                    <button id="stop-btn" class="btn-gold action-btn rounded-full font-extrabold hidden">
                        åœæ­¢
                    </button>
                </div>
            </div>
        </main>

        <!-- ä¾§è¾¹ä¸­å¥–è®°å½• (å³ä¾§æ‚¬æµ®/ç§»åŠ¨ç«¯åº•éƒ¨æŠ½å±‰) -->
        <button onclick="toggleWinners()" class="fixed right-4 bottom-24 lg:hidden z-30 bg-gold text-red-900 p-3 rounded-full shadow-lg font-bold">
            ğŸ† è®°å½•
        </button>

        <aside id="winner-aside" class="fixed right-0 bottom-0 w-full h-[70vh] lg:h-[600px] lg:w-80 lg:right-8 lg:top-1/2 lg:-translate-y-1/2 bg-red-700/90 lg:bg-red-700/40 backdrop-blur-xl rounded-t-3xl lg:rounded-3xl p-6 border-t-4 lg:border-2 border-gold/40 shadow-2xl z-40 flex flex-col transition-transform transform translate-y-full lg:translate-y-[-50%]">
            <div class="flex justify-between items-center mb-6 border-b-2 border-gold/30 pb-4">
                <h3 class="title-font winner-title text-gold">ğŸ† ä¸­å¥–åå•</h3>
                <button onclick="toggleWinners()" class="lg:hidden text-gold text-2xl">&times;</button>
            </div>
            <div id="main-winner-list" class="history-list flex-1 overflow-y-auto space-y-4 pr-2">
                <!-- è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="mt-6 pt-4 border-t border-gold/30 text-center text-gold font-bold">
                å½“å‰å€™é€‰ï¼š<span id="candidate-count" class="text-white">0</span> äºº
            </div>
        </aside>

        <footer class="mt-12 flex flex-wrap justify-center gap-6 md:gap-10">
            <button onclick="toggleSettings()" class="text-lg md:text-xl text-gold/80 underline hover:text-gold transition-colors font-bold">é…ç½®åå•</button>
            <button onclick="resetWinners()" class="text-lg md:text-xl text-red-100/80 underline hover:text-red-50 transition-colors font-bold">é‡ç½®æŠ½å¥–</button>
        </footer>
    </div>

    <!-- éšè—çš„è®¾ç½®é¢æ¿ -->
    <div id="settings-panel" class="fixed right-0 top-0 h-full w-full sm:w-96 bg-red-700 p-6 md:p-8 transform translate-x-full transition-transform z-50 border-l-4 border-gold/50 shadow-[-20px_0_60px_rgba(0,0,0,0.7)] flex flex-col">
        <h3 class="title-font text-3xl mb-6 text-gold shrink-0">æŠ½å¥–åå•ç®¡ç†</h3>
        <textarea id="name-input" class="w-full flex-1 bg-red-900/50 text-white p-4 rounded-2xl border-2 border-gold/30 focus:border-gold/60 outline-none mb-6 text-xl" placeholder="è¯·è¾“å…¥åå•ï¼Œæ¯è¡Œä¸€ä¸ªåå­—"></textarea>
        <div class="space-y-4 shrink-0">
            <button onclick="saveNames()" class="w-full bg-gradient-to-r from-gold to-yellow-500 text-red-900 py-5 rounded-full font-extrabold text-2xl shadow-lg hover:scale-105 transition-transform">ä¿å­˜å¹¶æ›´æ–°</button>
            <button onclick="toggleSettings()" class="w-full bg-white/20 text-white py-4 rounded-full font-bold text-lg hover:bg-white/30 transition-colors">å–æ¶ˆå…³é—­</button>
        </div>
    </div>

    <script src="assets/app.js"></script>
</body>
</html>
